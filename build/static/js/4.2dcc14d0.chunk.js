(this.webpackJsonpactivity=this.webpackJsonpactivity||[]).push([[4],{237:function(e,t,i){e.exports={heimlich:"Heimlich_heimlich__3DEtP",banner:"Heimlich_banner__3LkLh",introduction:"Heimlich_introduction__3cvWY",tabs:"Heimlich_tabs__2WXdJ",prizes:"Heimlich_prizes__2Rqij",activities:"Heimlich_activities__30ZzF",scale:"Heimlich_scale__3ddB6",up:"Heimlich_up__3huj1"}},238:function(e,t,i){e.exports={tabs:"Tabs_tabs__34giv",tabTitles:"Tabs_tabTitles__2bVdA",tabTitle:"Tabs_tabTitle__3ltX-",video:"Tabs_video__2qt-X",imgtxt:"Tabs_imgtxt__39Rxg",tabContents:"Tabs_tabContents__1ql_s",tabContent:"Tabs_tabContent__1LnY1",teachVideo:"Tabs_teachVideo__3D3Bv",cover:"Tabs_cover__14uCN",coverImg:"Tabs_coverImg__1IqHF",coverBg:"Tabs_coverBg__1M3ew",playIcon:"Tabs_playIcon__2rLh_",badgeWrap:"Tabs_badgeWrap__26cXV",badgeImg:"Tabs_badgeImg__1qCY4",locked:"Tabs_locked__3inhG",unlocked:"Tabs_unlocked__3vqX6",badgeInfo:"Tabs_badgeInfo__12qHJ",badgeTitle:"Tabs_badgeTitle__2zQf5",badgeGetNum:"Tabs_badgeGetNum__2oDQ7",badgeConditions:"Tabs_badgeConditions__3jrjz",badgeCondition:"Tabs_badgeCondition__2US5c",badgeUnlockButton:"Tabs_badgeUnlockButton__2pHbP",badgeShareButton:"Tabs_badgeShareButton__1Gm6J",shareIcon:"Tabs_shareIcon__3x4N9",bottom:"Tabs_bottom__2k0qj",fixed:"Tabs_fixed__1_VRb",fullScreenVideo:"Tabs_fullScreenVideo__LeqW-",scale:"Tabs_scale__1UG9q",up:"Tabs_up__2Pe8v"}},239:function(e,t,i){e.exports={prizes:"Prizes_prizes__1YzDy",prizesTitle:"Prizes_prizesTitle__3TG2N",prizesContent:"Prizes_prizesContent__dFQoJ",prizeList:"Prizes_prizeList__2us_b",prizeItem:"Prizes_prizeItem__3ayRz",prizeImg:"Prizes_prizeImg__2mPX1",prizeInfo:"Prizes_prizeInfo__362bj",prizeName:"Prizes_prizeName__3sNG9",prizeThreshold:"Prizes_prizeThreshold__2y0Vb",prizeButton:"Prizes_prizeButton__FThvo",scale:"Prizes_scale__2jYDV",up:"Prizes_up__1nsds"}},240:function(e,t,i){e.exports={activities:"Activities_activities__2WPZi",activitiesTitle:"Activities_activitiesTitle__zWIta",activitiesContent:"Activities_activitiesContent__3MOxQ",activityList:"Activities_activityList__2R204",activityItem:"Activities_activityItem__QfB3g",activityImg:"Activities_activityImg__3yBHH",activityInfo:"Activities_activityInfo__2-Acx",activityName:"Activities_activityName__2exWb",activityTime:"Activities_activityTime__1BBKr",activityDesc:"Activities_activityDesc__3NYEK",activityDistance:"Activities_activityDistance__UhGx0",activitySignup:"Activities_activitySignup__20msC",activityMoney:"Activities_activityMoney__c_wwa",activityMoneyYen:"Activities_activityMoneyYen__3AgSK",activityMoneyNum:"Activities_activityMoneyNum__385dG",activitySignupButton:"Activities_activitySignupButton__3EuNZ",divider:"Activities_divider__1QBRH",activityMoreButton:"Activities_activityMoreButton__rJQhi",scale:"Activities_scale__xsH_4",up:"Activities_up__1fWPK"}},251:function(e,t){},253:function(e,t,i){e.exports={comments:"Comments_comments__22fhM",commentsTitle:"Comments_commentsTitle__10sxC",commentList:"Comments_commentList__fVEFT",commentItem:"Comments_commentItem__3wkDC",commentImg:"Comments_commentImg__17Os2",commentContent:"Comments_commentContent__1onG8",commentTitle:"Comments_commentTitle__bJ8kX",commentUser:"Comments_commentUser__3-fWj",commentUserAvatar:"Comments_commentUserAvatar__2vSUD",commentUserName:"Comments_commentUserName__2jnok",commentUserLikeIcon:"Comments_commentUserLikeIcon__3SreA",liked:"Comments_liked__1VG8F",commentUserLikeNum:"Comments_commentUserLikeNum__2gPtf",topic:"Comments_topic__2scOS",commentTag:"Comments_commentTag__3jCRI",commentUserParti:"Comments_commentUserParti__1wwV1",commentLookButton:"Comments_commentLookButton__3IznN",scale:"Comments_scale__YHF7y",up:"Comments_up__2s268"}},372:function(e,t,i){"use strict";i.r(t);var c=i(4),a=i(8),s=i(45),n=i(59),o=i(0),m=i.n(o),r=i(237),l=i.n(r),d=i(73),j=m.a.createContext(d.a),b=function(){return m.a.useContext(j)},_=(i(79),i(46)),v=i.n(_),u=i(370),h=i(238),O=i.n(h),x=i.p+"static/media/icon_badge_locked.72f8461d.png",p=i.p+"static/media/icon_badge_unlocked.e690a28c.png",g=i(5),N=i(9),f=Object(n.b)((function(e){b().heimlich;var t=e.teachVideoConfig,i=e.teachImgtxtConfig,n=e.badgeData,m=Object(o.useState)(!1),r=Object(u.a)(m,2),l=r[0],d=r[1],j=Object(o.useState)(!1),_=Object(u.a)(j,2),h=_[0],f=_[1],y=Object(o.useState)(!1),C=Object(u.a)(y,2),k=C[0],T=C[1],I=Object(o.useRef)(null),z=Object(o.useRef)(null),L=Object(g.f)();Object(o.useEffect)((function(){window.removeEventListener("scroll",U),window.addEventListener("scroll",U)}),[z]);var U=function(){if(z.current){var e=z.current.getBoundingClientRect();e.top+e.height<0?(console.log("badgeButton fixed"),T(!0)):(console.log("badgeButton not fixed"),T(!1))}},A=function(){Object(s.a)().then((function(){L.push("/heimlich/qa")}))},w=function(){var e=Object(a.a)(Object(c.a)().mark((function e(){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v.a.info("\u8fd9\u91cc\u6a21\u62df\u5728App\u4e2d\u62c9\u8d77\u5206\u4eab");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(e){return n.isUnlocked?Object(N.jsxs)("button",{className:O.a.badgeShareButton,onClick:w,ref:e,children:[Object(N.jsx)("i",{className:O.a.shareIcon}),"\u6280\u80fd\u8fc7\u786c \u70ab\u8000\u4e00\u4e0b"]}):Object(N.jsx)("button",{className:O.a.badgeUnlockButton,onClick:A,ref:e,children:"\u53bb\u8ba4\u8bc1\u89e3\u9501\uff0c\u505a\u5408\u683c\u7236\u6bcd"})};return Object(N.jsxs)("div",{className:O.a.tabs,children:[Object(N.jsxs)("div",{className:O.a.tabTitles,children:[Object(N.jsx)("div",{className:"".concat(O.a.tabTitle," ").concat(O.a.video),children:Object(N.jsx)("h2",{children:"\u89c6\u9891\u5b66\u4e60"})}),Object(N.jsx)("div",{className:"".concat(O.a.tabTitle," ").concat(O.a.imgtxt),onClick:function(){i.link&&(location.href=i.link)},children:Object(N.jsx)("h2",{children:"\u56fe\u6587\u5b66\u4e60"})})]}),Object(N.jsx)("div",{className:O.a.tabContents,children:Object(N.jsxs)("div",{className:"".concat(O.a.tabContent," ").concat(O.a.video),children:[Object(N.jsxs)("div",{className:O.a.teachVideo,children:[Object(N.jsx)("video",{ref:I,src:t.video,playsInline:!0,"webkit-playsinline":"true",controls:l,preload:"metadata"}),!l&&Object(N.jsxs)("div",{className:O.a.cover,children:[Object(N.jsx)("img",{className:O.a.coverImg,src:t.poster}),Object(N.jsx)("div",{className:O.a.coverBg}),Object(N.jsx)("div",{className:O.a.playIcon,onClick:function(){var e;d(!0),null===(e=I.current)||void 0===e||e.play()}})]})]}),Object(N.jsxs)("div",{className:O.a.badgeWrap,children:[n.isUnlocked?Object(N.jsxs)("div",{className:O.a.badgeImg,onClick:function(){location.href="/interaction-activity/heimlich/certify-succ?naviType=4"},children:[Object(N.jsx)("img",{src:p,alt:""}),Object(N.jsx)("label",{className:O.a.unlocked})]}):Object(N.jsxs)("div",{className:O.a.badgeImg,children:[Object(N.jsx)("img",{src:x,alt:""}),Object(N.jsx)("label",{className:O.a.locked})]}),Object(N.jsxs)("div",{className:O.a.badgeInfo,children:[n.isUnlocked&&Object(N.jsx)("h3",{className:O.a.badgeTitle,children:"\u60a8\u5df2\u83b7\u5f97"}),Object(N.jsx)("h3",{className:O.a.badgeTitle,children:"\u6d77\u59c6\u7acb\u514b\u6551\u62a4\u6307\u5bfc\u5fbd\u7ae0"}),n.isUnlocked?Object(N.jsxs)("p",{className:O.a.badgeGetNum,children:["\u5168\u56fd\u7b2c",Object(N.jsx)("em",{children:n.userRank}),"\u4f4d\u89e3\u9501\u8be5\u5fbd\u7ae0"]}):Object(N.jsxs)("p",{className:O.a.badgeGetNum,children:["\u5168\u56fd\u5df2\u6709",Object(N.jsx)("em",{children:n.totalNum}),"\u4eba\u89e3\u9501"]}),!n.isUnlocked&&Object(N.jsxs)("ul",{className:O.a.badgeConditions,children:[Object(N.jsx)("li",{className:O.a.badgeCondition,children:"\xb7 \u5728\u7ebf\u5b66\u4e60\u5b8c\u6210\u8003\u8bd5\u8ba4\u8bc1\uff0c\u53ef\u89e3\u9501"}),Object(N.jsx)("li",{className:O.a.badgeCondition,children:"\xb7 \u53c2\u52a0\u7ebf\u4e0b\u95e8\u5e97\u6559\u5b66\u6d3b\u52a8\uff0c\u53ef\u89e3\u9501"})]})]})]}),B(z)]})}),Object(N.jsx)("div",{className:"".concat(O.a.bottom," ").concat(k?O.a.fixed:""),children:B(null)}),h&&Object(N.jsx)("div",{className:O.a.fullScreenVideo,onClick:function(){f(!1)},children:Object(N.jsx)("video",{src:t.video,playsInline:!0,"webkit-playsinline":"true",controls:!0,autoPlay:!0,poster:t.poster,controlsList:"nofullscreen",preload:"metadata"})})]})})),y=f,C=i(239),k=i.n(C),T=Object(n.b)((function(e){var t=e.badgeData,i=e.prizeList;return Object(N.jsxs)("div",{className:k.a.prizes,children:[Object(N.jsxs)("div",{className:k.a.prizesTitle,children:[Object(N.jsx)("i",{}),Object(N.jsx)("h2",{children:t.isUnlocked?t.isShared?"\u5206\u4eab\u6210\u529f\uff0c\u5206\u4eab\u793c\u54c1\u5df2\u53d1\u653e":"\u5206\u4eab\u6210\u529f\u53ef\u83b7\u5f97\u4ee5\u4e0b\u5956\u54c1":"\u8ba4\u8bc1\u6210\u529f\u53ef\u83b7\u5f97\u4ee5\u4e0b\u5956\u54c1"}),Object(N.jsx)("i",{})]}),Object(N.jsx)("div",{className:k.a.prizesContent,children:Object(N.jsx)("ul",{className:k.a.prizeList,children:i.map((function(e,i){return Object(N.jsxs)("li",{className:k.a.prizeItem,children:[Object(N.jsx)("img",{className:k.a.prizeImg,src:e.image,alt:""}),Object(N.jsxs)("div",{className:k.a.prizeInfo,children:[Object(N.jsx)("h3",{className:k.a.prizeName,children:e.name}),Object(N.jsx)("p",{className:k.a.prizeThreshold,children:e.desc})]}),t.isUnlocked&&t.isShared&&Object(N.jsx)("button",{className:k.a.prizeButton,onClick:function(){!function(e){e.isEntity?location.href="https://w.cekid.com/user-center/prize-record?kwtarget=blank":location.href="https://w.cekid.com/public-ticket/coupon/shopping?naviType=4"}(e)},children:"\u53bb\u67e5\u770b"})]},i)}))})})]})})),I=i(240),z=i.n(I),L=i(106),U=i.n(L),A=i(241),w=i.n(A),B=Object(n.b)((function(e){b().heimlich;var t=e.activityList,i=e.cityInfo,n=function(){var e=Object(a.a)(Object(c.a)().mark((function e(t,a){var n;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=i.cityCode,e.next=3,Object(s.e)();case 3:e.t1=e.sent,n={citycode:e.t0,isMiniProgram:e.t1,kwtarget:"blank"},location.href="/interaction-activity/detail/".concat(t.activityId,"?").concat(w.a.stringify(n));case 6:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}(),o=function(e){var t=e.isPay,i=e.payWay,c=e.activitySkuPrice,a=e.consIntegral,s=e.freqEntertainment;return"0"==t?Object(N.jsx)("span",{className:z.a.activityMoneyNum,children:"\u514d\u8d39"}):1==i?Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("span",{className:z.a.activityMoneyYen,children:"\xa5"}),Object(N.jsx)("span",{className:z.a.activityMoneyNum,children:c/100})]}):2==i?Object(N.jsxs)("span",{className:z.a.activityMoneyNum,children:[a,"\u79ef\u5206"]}):3==i?Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("span",{className:z.a.activityMoneyYen,children:"\xa5"}),Object(N.jsxs)("span",{className:z.a.activityMoneyNum,children:[c/100,"\u6216",a,"\u79ef\u5206"]})]}):4==i?Object(N.jsxs)("span",{className:z.a.activityMoneyNum,children:[s,"\u6b21\u6e38\u4e50\u5361"]}):5==i?Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("span",{className:z.a.activityMoneyYen,children:"\xa5"}),Object(N.jsxs)("span",{className:z.a.activityMoneyNum,children:[c/100,"\u6216",s,"\u6b21\u6e38\u4e50\u5361"]})]}):6==i?Object(N.jsxs)("span",{className:z.a.activityMoneyNum,children:[a,"\u79ef\u5206\u6216",s,"\u6b21\u6e38\u4e50\u5361"]}):7==i?Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("span",{className:z.a.activityMoneyYen,children:"\xa5"}),Object(N.jsxs)("span",{className:z.a.activityMoneyNum,children:[c/100,"\u6216",a,"\u79ef\u5206\u6216",s,"\u6b21\u6e38\u4e50\u5361"]})]}):void 0};return Object(N.jsxs)("div",{className:z.a.activities,children:[Object(N.jsxs)("div",{className:z.a.activitiesTitle,children:[Object(N.jsx)("i",{}),Object(N.jsx)("h2",{children:"\u6d77\u59c6\u7acb\u514b\u95e8\u5e97\u6559\u5b66"}),Object(N.jsx)("i",{})]}),Object(N.jsxs)("div",{className:z.a.activitiesContent,children:[Object(N.jsx)("ul",{className:z.a.activityList,children:t.slice(0,2).map((function(e,i){return Object(N.jsxs)("li",{children:[Object(N.jsxs)("div",{className:z.a.activityItem,onClick:function(){n(e,i)},children:[Object(N.jsx)("img",{className:z.a.activityImg,src:e.coverPhotoUrl}),Object(N.jsxs)("div",{className:z.a.activityInfo,children:[Object(N.jsx)("h3",{className:z.a.activityName,children:e.storeName}),Object(N.jsxs)("p",{className:z.a.activityTime,children:[U()(e.activityTimeStart).format("MM\u6708DD\u65e5HH:mm"),"\uff5e",U()(e.activityTimeEnd).format("MM\u6708DD\u65e5HH:mm")]}),Object(N.jsxs)("p",{className:z.a.activityDesc,children:[e.signUpCount,"\u4eba\u5df2\u62a5\u540d",e.limitCount>0?"\uff08\u9650".concat(e.limitCount,"\u4eba\uff09"):" \u4e0d\u9650\u4eba\u6570",Number(e.distance)>0&&Object(N.jsxs)("span",{className:z.a.activityDistance,children:[e.distance,"km"]})]}),Object(N.jsxs)("div",{className:z.a.activitySignup,children:[Object(N.jsx)("div",{className:z.a.activityMoney,children:o(e)}),Object(N.jsx)("button",{className:z.a.activitySignupButton,children:"\u53bb\u62a5\u540d"})]})]})]}),i<t.slice(0,2).length-1&&Object(N.jsx)("div",{className:z.a.divider})]},i)}))}),t.length>2&&Object(N.jsxs)("button",{className:z.a.activityMoreButton,onClick:function(){location.href="/interaction-activity/activitylist?title=\u6d77\u59c6\u7acb\u514b\u6025\u6551&typeCode=10171140,10171154&type=2&kwtarget=blank"},children:["\u67e5\u770b\u66f4\u591a",Object(N.jsx)("i",{})]})]})]})})),M=B,P=i(253),D=i.n(P),S=i(254),H=i.n(S),V=Object(n.b)((function(e){var t=e.topicInfo,i=e.commentList;b().heimlich;return Object(N.jsxs)("div",{className:D.a.comments,children:[Object(N.jsx)("h2",{className:D.a.commentsTitle,children:"\u6d77\u59c6\u7acb\u514b\u5927\u5bb6\u8bf4"}),Object(N.jsxs)(H.a,{className:D.a.commentList,updateOnEachImageLoad:!0,options:{gutter:Math.floor(.18*Number(document.documentElement.style.fontSize.slice(0,-2))),transitionDuration:0,fitWidth:!1},children:[t.image&&Object(N.jsxs)("div",{className:"".concat(D.a.commentItem," ").concat(D.a.topic),onClick:function(){t.id&&(location.href="/interaction-activity/topic/".concat(t.id,"?kwtarget=blank"))},children:[Object(N.jsx)("img",{className:D.a.commentImg,src:t.image}),Object(N.jsxs)("div",{className:D.a.commentContent,children:[Object(N.jsx)("div",{className:D.a.commentTag,children:"\u6709\u5956\u8bdd\u9898"}),Object(N.jsx)("p",{className:D.a.commentTitle,children:t.name}),Object(N.jsxs)("div",{className:D.a.commentUser,children:[Object(N.jsx)("img",{className:D.a.commentUserAvatar,src:t.userAvatar1}),Object(N.jsx)("img",{className:D.a.commentUserAvatar,src:t.userAvatar2}),Object(N.jsx)("img",{className:D.a.commentUserAvatar,src:t.userAvatar3}),Object(N.jsxs)("span",{className:D.a.commentUserParti,children:[t.participateNum,"\u4eba\u5df2\u53c2\u4e0e"]})]}),Object(N.jsx)("button",{className:D.a.commentLookButton})]})]}),i.map((function(e,i){return Object(N.jsxs)("div",{className:"".concat(D.a.commentItem),onClick:function(){!function(e,i){var c=e.id,a=e.activityId,s=void 0===a?"":a,n=e.uid,o=void 0===n?"":n,m=t.isPunch;c&&(location.href="/interaction-activity/commentdetail?commentId=".concat(c,"&activityId=").concat(s,"&tuid=").concat(o,"&realType=").concat(m?1:0,"&kwtarget=blank"))}(e)},children:[Object(N.jsx)("img",{className:D.a.commentImg,src:e.image+"?imageView2/w/684/q/80"}),Object(N.jsxs)("div",{className:D.a.commentContent,children:[Object(N.jsx)("p",{className:D.a.commentTitle,children:e.content}),Object(N.jsxs)("div",{className:D.a.commentUser,children:[Object(N.jsx)("img",{className:D.a.commentUserAvatar,src:e.userAvatar}),Object(N.jsx)("span",{className:D.a.commentUserName,children:e.userName}),e.likeNum>=0&&Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("i",{className:"".concat(D.a.commentUserLikeIcon," ").concat(e.likeFlag?D.a.liked:"")}),Object(N.jsx)("span",{className:D.a.commentUserLikeNum,children:e.likeNum})]})]})]})]},i)}))]})]})})),E=Object(n.b)((function(){var e=b().heimlich,t=e.cmsData,i=e.badgeData,n=e.prizeList,m=e.activityList,r=e.commentList,d=e.cityInfo;Object(o.useEffect)((function(){Object(s.f)("\u6d77\u59c6\u7acb\u514b\u5728\u7ebf\u5b66\u4e60",!0,!0),e.getLocationInfo().then(Object(a.a)(Object(c.a)().mark((function t(){return Object(c.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getCmsData();case 2:return t.next=4,e.getBadgeData();case 4:e.getPrizeList(),e.getActivityList(),e.getCommentList();case 7:case"end":return t.stop()}}),t)})))),window.addEventListener("scroll",j)}),[e]);var j=function(t){document.body.scrollHeight-window.pageYOffset-window.innerHeight<100&&(e.commentListQuery.finished||e.commentListQuery.loading||e.getCommentList())};return t&&Object(N.jsxs)("div",{className:l.a.heimlich,children:[Object(N.jsx)("img",{className:l.a.banner,src:t.homeConfig.banner}),Object(N.jsx)("img",{className:l.a.introduction,src:t.homeConfig.introduction}),Object(N.jsx)("section",{className:l.a.tabs,children:Object(N.jsx)(y,{teachVideoConfig:t.homeConfig.teachVideo,teachImgtxtConfig:t.homeConfig.teachImgtxt,badgeData:i})}),n.length>0&&Object(N.jsx)("section",{className:l.a.prizes,children:Object(N.jsx)(T,{prizeList:n,badgeData:i})}),m.length>0&&Object(N.jsx)("section",{className:l.a.activities,children:Object(N.jsx)(M,{activityList:m,cityInfo:d})}),(t.homeConfig.dajiashuo.topicInfo.image||r.length>0)&&Object(N.jsx)("section",{className:l.a.comments,children:Object(N.jsx)(V,{topicInfo:t.homeConfig.dajiashuo.topicInfo,commentList:r})})]})}));t.default=E}}]);